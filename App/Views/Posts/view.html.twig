{% extends 'base.html.twig' %}

{% block body %}
    <div class="border rounded mb-5">
        <div class="card-header ">
            <h2 class="card-title">{{ post.title }}</h2>
            <h5>For {{ book.title }}</h5>
            <h6>By: {{ post.username }}
                {% if post.userType == 'author' %}
                    <span class="badge badge-info">Author</span>
                {% elseif post.userType == 'admin' %}
                    <span class="badge badge-info">Admin</span>
                {% endif %}</h6>
            <a href="/posts/upvote/{{ post.id }}" class="btn btn-sm btn-outline-danger float-right m-1"><i class="fa fa-thumbs-down" aria-hidden="true"></i></a>
            <a href="/posts/downvote/{{ post.id }}" class="btn btn-sm btn-outline-success float-right m-1"><i class="fa fa-thumbs-up" aria-hidden="true"></i></a>
            <h1 class="p-1"></h1>
        </div>
        <div class="card-body">
            <p class="lead">
                {{ post.body|raw }}
            </p>
        </div>
    </div>

    {% for reply in replies %}
        <div class="card p-3" style="border-top: 4px solid gray;">
            <div class="round">
                By: {{ reply.username }}
                {% if reply.userType == 'author' %}
                    <span class="badge badge-info">Author</span>
                {% elseif reply.userType == 'admin' %}
                    <span class="badge badge-info">Admin</span>
                {% endif %}
                <br>Created At: {{ reply.created_at }}
            </div>
            <div class="card-body">
                {{ reply.text|raw }}
            </div>
        </div>
    {% endfor %}

    {{ pagination|raw }}

    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Reply to Post</h4>
        </div>
        <div class="card-body">
            <form action="/replies/create" method="post">
                {% include 'summernote.twig' %}
                <input type="hidden" name="post_id" value="{{ post.id }}">
                <input type="submit" value="Reply" class="btn btn-primary mt-3">
            </form>
        </div>
    </div>

{% endblock %}